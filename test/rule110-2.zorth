include "std/std.zorth"

memory display 30 end

display 28 + 1 store8


0 while dup 30 < do 
	0 while dup 30 < do 
		dup display + load8 if 
			display 30 + '*' store8  // 48 = '*'
		else
			display 30 + ' ' store8  // 32 = ' '
		end

		1 display 30 + puts // write(1, display + 30, 1);

		1 + 
	end
	drop

	display 30 + '\n' store8
	1 display 30 + std.stdout std.syscall.write // fputc('\n', stdout);
	
	// int pattern = (board[0] << 1) | board[1]
	display load8 1 shl
	display 1 + load8 
	bor 
	
	1 while dup 28 < do
		// pattern = ((pattern << 1) & 7) | board[j + 1]
		swap 1 shl 7 band
		over display + 1 + load8
		bor

		// board[j] = (110 >> pattern) & 1
		2dup 110 swap shr 1 band 
		swap display + swap store8
		swap

		1 +
	end 

	drop // index
	drop // pattern

	1 +
end
